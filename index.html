<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bowling Simulator - Responsive</title>
    <style>
        :root {
            --primary-blue: #1e3a8a;
            --accent-orange: #ea580c;
            --bg-slate: #f8fafc;
        }

        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background-color: var(--bg-slate); 
            margin: 0;
            padding: 20px;
            display: flex; 
            flex-direction: column; 
            align-items: center; 
        }

        .container { 
            background: white; 
            padding: 20px; 
            border-radius: 12px; 
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); 
            width: 95%; 
            max-width: 1100px; 
            box-sizing: border-box;
        }

        h2 { color: var(--primary-blue); text-align: center; margin-top: 0; font-size: 1.5rem; }

        /* Responsive Table Wrapper */
        .table-wrapper {
            width: 100%;
            overflow-x: auto; /* ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
            margin-bottom: 20px;
            border: 2px solid var(--primary-blue);
            border-radius: 8px;
            -webkit-overflow-scrolling: touch;
        }

        .scorecard { 
            border-collapse: collapse; 
            min-width: 900px; /* ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏ö‡∏µ‡∏¢‡∏î */
            width: 100%; 
            table-layout: fixed;
        }

        .scorecard th, .scorecard td { border: 1px solid #94a3b8; text-align: center; }
        .frame-num { background: var(--primary-blue); color: white; padding: 10px; font-weight: bold; font-size: 14px; }
        
        /* ‡πÅ‡∏ñ‡∏ß‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏° */
        .frame-total { height: 60px; font-size: 22px; font-weight: bold; color: var(--accent-orange); background: #fff7ed; }
        
        /* ‡πÅ‡∏ñ‡∏ß‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å */
        .rolls { display: flex; height: 45px; background: #fff; }
        .rolls input { 
            width: 100%; 
            border: none; 
            text-align: center; 
            font-size: 18px; 
            font-weight: bold; 
            outline: none;
            -moz-appearance: textfield;
        }
        .rolls input:nth-child(1) { border-right: 1px solid #94a3b8; }
        .rolls input:nth-child(3) { border-left: 1px solid #94a3b8; }
        input:focus { background: #e2e8f0; }

        /* Logic Box */
        .logic-panel { 
            background: #fefce8; 
            border-left: 4px solid #f59e0b; 
            padding: 15px; 
            margin-bottom: 20px; 
            width: 100%;
            box-sizing: border-box;
            border-radius: 4px; 
        }
        .logic-panel h3 { margin: 0 0 10px 0; color: #92400e; font-size: 1rem; }
        .log-item { font-size: 0.9rem; color: #451a03; font-family: 'Consolas', monospace; margin: 4px 0; word-break: break-all; }
        .highlight { font-weight: bold; color: var(--accent-orange); }

        /* Total Box */
        .total-container { display: flex; justify-content: center; width: 100%; }
        .total-box { 
            background: var(--primary-blue); 
            color: white; 
            padding: 15px 40px; 
            border-radius: 8px; 
            font-size: 1.5rem; 
            font-weight: bold;
            text-align: center;
        }

        /* ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏à‡∏≠‡πÄ‡∏•‡πá‡∏Å */
        @media (max-width: 600px) {
            body { padding: 10px; }
            .container { padding: 15px; }
            h2 { font-size: 1.2rem; }
            .total-box { font-size: 1.2rem; padding: 12px 30px; }
            .instructions { font-size: 0.8rem; text-align: center; color: #64748b; margin-top: 15px; }
        }

        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
    </style>
</head>
<body>

<div class="container">
    <h2>üé≥ Bowling Score Simulator</h2>
    
    <div class="table-wrapper">
        <table class="scorecard">
            <tr id="frame-numbers"></tr>
            <tr id="score-rows"></tr>
            <tr id="input-rows"></tr>
        </table>
    </div>

    <div class="logic-panel">
        <h3>üîç ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏™‡∏π‡∏ï‡∏£ (Real-time Trace):</h3>
        <div id="logic-content">‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì... ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏û‡∏¥‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô</div>
    </div>

    <div class="total-container">
        <div class="total-box">Total Score: <span id="grand-total">0</span></div>
    </div>

    <div class="instructions">
        üí° ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠: ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏±‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÑ‡∏õ‡∏ó‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢-‡∏Ç‡∏ß‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡πÄ‡∏ü‡∏£‡∏°‡∏ó‡∏µ‡πà 1-10 ‡πÑ‡∏î‡πâ
    </div>
</div>

<script>
    const frameNumbersRow = document.getElementById('frame-numbers');
    const inputRows = document.getElementById('input-rows');
    const scoreRows = document.getElementById('score-rows');

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á
    for (let i = 1; i <= 10; i++) {
        const th = document.createElement('th');
        th.className = 'frame-num';
        th.innerText = `‡πÄ‡∏ü‡∏£‡∏° ${i}`;
        frameNumbersRow.appendChild(th);

        const tdScore = document.createElement('td');
        tdScore.id = `f${i}-total`;
        tdScore.className = 'frame-total';
        scoreRows.appendChild(tdScore);

        const tdInput = document.createElement('td');
        const rollDiv = document.createElement('div');
        rollDiv.className = 'rolls';
        const rollCount = (i === 10) ? 3 : 2;
        for (let r = 1; r <= rollCount; r++) {
            const input = document.createElement('input');
            input.type = 'number';
            input.inputMode = 'numeric'; // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏µ‡∏¢‡πå‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
            input.id = `f${i}r${r}`;
            input.oninput = calculateBowling;
            rollDiv.appendChild(input);
        }
        tdInput.appendChild(rollDiv);
        inputRows.appendChild(tdInput);
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏° ‡πÅ‡∏ï‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• Responsive)
    function calculateBowling() {
        let rolls = [];
        let rawInputs = [];
        for (let i = 1; i <= 10; i++) {
            let r1 = parseInt(document.getElementById(`f${i}r1`).value);
            let r2 = parseInt(document.getElementById(`f${i}r2`).value);
            let r3 = (i === 10) ? parseInt(document.getElementById(`f${i}r3`).value) : null;
            rawInputs.push({r1, r2, r3});
        }
        for(let i=0; i<9; i++) {
            let {r1, r2} = rawInputs[i];
            if(!isNaN(r1)) {
                rolls.push(r1);
                if(r1 !== 10) rolls.push(isNaN(r2) ? null : r2);
                else rolls.push(0); 
            } else rolls.push(null, null);
        }
        rolls.push(isNaN(rawInputs[9].r1) ? null : rawInputs[9].r1);
        rolls.push(isNaN(rawInputs[9].r2) ? null : rawInputs[9].r2);
        rolls.push(isNaN(rawInputs[9].r3) ? null : rawInputs[9].r3);

        let total = 0; let rollIdx = 0; let frameTotals = []; let logs = [];

        for (let f = 0; f < 10; f++) {
            let currentRoll = rolls[rollIdx];
            if (currentRoll === null) break;

            if (f < 9 && currentRoll === 10) {
                let b1 = rolls[rollIdx + 2];
                let b2 = (b1 === 10 && f < 8) ? rolls[rollIdx + 4] : rolls[rollIdx + 3];
                if (b1 !== null && b2 !== null) {
                    let fScore = 10 + b1 + b2; total += fScore; frameTotals[f] = total;
                    logs.push(`F${f+1} [Strike]: 10+(${b1}+${b2})=${fScore} | <span class="highlight">Sum:${total}</span>`);
                }
                rollIdx += 2;
            } else if (f < 9 && (currentRoll + rolls[rollIdx+1] === 10)) {
                let b1 = rolls[rollIdx + 2];
                if (b1 !== null) {
                    let fScore = 10 + b1; total += fScore; frameTotals[f] = total;
                    logs.push(`F${f+1} [Spare]: 10+(${b1})=${fScore} | <span class="highlight">Sum:${total}</span>`);
                }
                rollIdx += 2;
            } else if (f < 9) {
                let r2 = rolls[rollIdx+1];
                if (r2 !== null) {
                    let fScore = currentRoll + r2; total += fScore; frameTotals[f] = total;
                    logs.push(`F${f+1} [Open]: ${currentRoll}+${r2}=${fScore} | <span class="highlight">Sum:${total}</span>`);
                }
                rollIdx += 2;
            } else {
                let r1 = rolls[rollIdx], r2 = rolls[rollIdx+1], r3 = rolls[rollIdx+2];
                if (r1 !== null && r2 !== null) {
                    let fScore = r1 + r2 + (isNaN(r3) ? 0 : r3); total += fScore; frameTotals[f] = total;
                    logs.push(`F10: ${r1}+${r2}+${isNaN(r3)?0:r3}=${fScore} | <span class="highlight">Sum:${total}</span>`);
                }
            }
        }
        for (let i = 1; i <= 10; i++) document.getElementById(`f${i}-total`).innerText = frameTotals[i-1] || "";
        document.getElementById('grand-total').innerText = total;
        document.getElementById('logic-content').innerHTML = logs.length > 0 ? logs.map(l => `<div class="log-item">${l}</div>`).join('') : "‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå...";
    }
</script>

</body>
</html>